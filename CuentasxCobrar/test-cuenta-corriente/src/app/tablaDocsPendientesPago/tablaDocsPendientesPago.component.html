<!-- Llamada de componentne de carga -->
<div *ngIf="cargando" class="flex items-center justify-center h-full">
  <app-loading></app-loading>
</div>

<!-- Tarjeta para mostrar los datos del cliente seleccionado -->
<div *ngIf="!cargando">
  <div *ngFor="let clienteDatos of parametrosArray" class="fade-in-up">
    <div class="relative flex justify-center mt-16 px-4 sm:px-6 md:px-8">
      <a
        class="flex flex-wrap bg-white border border-gray-200 rounded-lg shadow max-w-screen-2xl w-full hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700"
      >
        <div class="flex flex-wrap p-4 leading-normal w-full text-justify">
          <h5
            class="mb-2 text-xl font-bold tracking-tight text-gray-900 dark:text-white w-full text-center sm:text-left break-words"
          >
            {{ "messages.datosDeCliente" | translate }}
          </h5>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.cta" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pCuenta_Cta || "messages.noExiste"
            }}</span>
          </div>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.facturaNombre" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pFacturaNom || "messages.noExiste" | translate
            }}</span>
          </div>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.facturaNIT" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pFacturaNit || "messages.noExiste" | translate
            }}</span>
          </div>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.ccDireccion" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pCCDireccion || "messages.noExiste" | translate
            }}</span>
          </div>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.facturaDireccion" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pFacturaDireccion || "messages.noExiste" | translate
            }}</span>
          </div>
          <div
            class="flex items-center ml-4 w-full sm:w-auto mt-2 sm:mt-0 min-w-[150px]"
          >
            <span
              class="mr-2 font-semibold text-gray-800 dark:text-gray-300 text-sm break-all"
              >{{ ("fields.telefono" | translate) + ":" }}</span
            >
            <span class="text-gray-700 dark:text-gray-400 text-sm break-all">{{
              clienteDatos.pTelefono || "messages.noExiste" | translate
            }}</span>
          </div>
        </div>
      </a>
    </div>
    <!-- Mensaje si no se encuentra documentos -->
    <div *ngIf="docs.length === 0 && !cargando" class="flex justify-center mt-4">
      <div class="bg-gray-200 border border-gray-300 rounded-lg shadow-xl p-6">
        <div class="flex items-center">
          <i
            class="fa-solid fa-file-circle-exclamation text-orange-300 text-2xl mr-4"
          ></i>
          <h2 class="text-lg font-semibold text-gray-800">
            {{ "messages.sinResultados" | translate }}
          </h2>
        </div>
        <p class="text-base text-gray-700 leading-relaxed">
          {{ "messages.noHayDocumentosPendientes" | translate }}
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Seccion de titulo y botones de acciones -->
<div
  *ngIf="docs.length > 0 && !cargando"
  class="mt-4 flex flex-col justify-center items-center space-y-4 md:space-y-0 md:flex-row md:space-x-4 p-4 md:px-8 lg:px-16 fade-in-up"
>
  <h1
    class="text-2xl md:text-3xl font-bold text-center md:text-left dark:text-white"
  >
    {{ "labels.documentosPendientesDePago" | translate }}
  </h1>
  <h1 class="text-base md:text-lg dark:text-white underline decoration-gray-500 dark:decoration-indigo-500 decoration-2 text-center md:text-left">
    {{ ("messages.noRegistros" | translate) + ":" }} {{ docs.length }}
  </h1>
  <!-- Seccion botones de ordenar documentos, aplicar, y pago cronologico -->
  <div
    class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4 w-full md:w-auto"
  >
    <button
      class="bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-1 px-3 rounded-md shadow-sm transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-300 flex items-center space-x-1"
      (click)="cambiarOrdenDocs()"
    >
      <ng-container *ngIf="orden === 'asc'; else descendente">
        <i class="fa-solid fa-angle-up text-lg"></i>
        <!-- Icono de Orden Ascendente -->
      </ng-container>
      <ng-template #descendente>
        <i class="fa-solid fa-angle-down text-lg"></i>
        <!-- Icono de Orden Descendente -->
      </ng-template>
      <span>{{
        orden === "asc"
          ? ("labels.descendente" | translate)
          : ("labels.ascendente" | translate)
      }}</span>
    </button>
    <button
      (click)="mostrarInputPagoCronologico()"
      class="bg-blue-500 hover:bg-blue-400 text-white font-semibold py-1 px-3 rounded-md shadow-sm transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-300 text-sm"
    >
      {{ "labels.pagoCronologico" | translate }}
    </button>

    <input
      *ngIf="mostrarMontoCronologico"
      type="number"
      class="w-full sm:w-3/4 md:w-48 lg:w-32 px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:border-blue-500 bg-white placeholder-gray-400 mt-2 md:mt-0"
      placeholder="{{ 'labels.ingresarMonto' | translate }}"
      [(ngModel)]="montoCronologico"
    />
    <button
      *ngIf="mostrarBotonAplicar"
      (click)="onAplicarClick()"
      class="bg-teal-600 text-white font-bold py-1 px-2 rounded-md transition-transform transform hover:scale-105 md:w-auto mt-2 md:mt-0"
    >
      {{ "labels.aplicar" | translate }}
    </button>
  </div>
</div>

<app-mensaje-advertencia
  [mostrar]="mostrarMensajeErrorMonto"
  titulo="Error"
  mensaje="{{ 'messages.revisarMontos' | translate }}"
  iconoClase="fa-solid fa-triangle-exclamation text-3xl mr-3"
  iconoColor="text-red-600"
  (cerrar)="cerrarMensaje()"
>
</app-mensaje-advertencia>

<app-mensaje-advertencia
  [mostrar]="mostrarMensajeErrorMontoPC"
  titulo="Error"
  mensaje="{{ 'messages.ingresarMontoAntesDelPago' | translate }}"
  iconoClase="fa-solid fa-triangle-exclamation text-3xl mr-3"
  iconoColor="text-red-600"
  (cerrar)="cerrarMensaje()"
>
</app-mensaje-advertencia>

<div
  *ngIf="mostrarConfirmacion"
  class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 duration-300 overflow-y-auto backdrop-blur-xs z-50 p-4 md:p-6 lg:p-8"
>
  <div class="bg-white rounded-lg p-4 shadow-lg w-full max-w-md sm:max-w-lg">
    <div class="flex items-center mb-3">
      <i class="fa-solid fa-check text-yellow-600 text-lg sm:text-xl mr-2"></i>
      <h2 class="text-lg sm:text-xl font-semibold text-gray-800">
        {{ "messages.confirmacionAplicacion" | translate }}
      </h2>
    </div>
    <p
      class="text-gray-800 text-sm sm:text-base mb-4"
      [innerHTML]="
        'messages.mensajeMontoSaldo'
          | translate
            : {
                sumaAplicada: (sumaAplicada | currency : 'Q'),
                saldoSeleccionado: (saldoSeleccionado | currency : 'Q')
              }
      "
    ></p>

    <p class="text-gray-800 text-sm sm:text-base text-center mb-4">
      {{ "messages.preguntaRealizarCambios" | translate }}
    </p>

    <div class="flex justify-center mt-4 space-x-3">
      <button
      #botonConfirmar
      (click)="confirmarCambios(); deshabilitarCheckbox()"
      class="group enfocado text-cyan-700 hover:text-white border border-cyan-700 hover:bg-cyan-800 transition ease-in duration-300 focus:ring-4 focus:ring-cyan-300 font-medium rounded-lg text-sm px-4 py-2 flex items-center"
    >
      {{ "labels.confirmarBtns" | translate }}
      <kbd class="ml-2 px-1.5 py-0.5 text-xs font-semibold text-cyan-700 bg-white border border-cyan-700 rounded-lg align-middle group-hover:text-white group-hover:bg-cyan-800 group-hover:border-white ease-in duration-300">
        Enter
      </kbd>
    </button>
    <button
      (click)="cancelarCambios()"
      class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 ease-in duration-300 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2"
    >
      {{ "labels.cancelarBtns" | translate }}
    </button>
    </div>
  </div>
</div>

<div *ngIf="!cargando" class="flex flex-col items-center fade-in-up">
  <div
    *ngIf="docs.length > 0"
    class="w-9/12 shadow-md sm:rounded-lg mt-4 scrollable-container"
    style="max-height: 570px"
  >
    <table
      class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
    >
      <!-- Encabezado de la tabla -->
      <thead
        class="bg-orange-500 text-white dark:bg-gray-800 dark:text-orange-400"
      >
        <tr>
          <!-- Primer columna de selección -->
          <th scope="col" class="p-4">Selec</th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.monto" | translate }}
          </th>
          <th scope="col" class="px-10 py-3">
            {{ "labels.aplicar" | translate }}
          </th>
          <th scope="col" class="px-10 py-3">
            {{ "fields.saldo" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.valorAplicado" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.consecutivoInterno" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.r_UserName" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.tipoCambio" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.moneda" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.montoMoneda" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.valorAplicadoMoneda" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaVencimiento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.userName" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.estadoDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaCorriente" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cobrarPagar" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.empresa" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.localizacion" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.estacionTrabajo" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaReg" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.estado" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaHora" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.mFechaHora" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.m_UserName" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaCorretista" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaCta" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaCorrientePadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cobrarPagarPadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.empresaPadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.localizacionPadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.estacionTrabajoPadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaRegPadre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaCuenta" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaInicial" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaFinal" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.generarCheque" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.proceso" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaBancaria" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.idDocumentoReferencia" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.cuentaCorrentistaRef" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.idDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fechaDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.desSerieDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.nomMoneda" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.desMoneda" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.simbolo" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.facturaNombre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.desCuentaCtaDocs" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.desTipoDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fDocumentoRelacion" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.desCuentaCorriente" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dTipoDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dSerieDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dEmpresa" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dLocalización" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dEstacionTrabajo" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dFechaReg" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.referencia" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.refIdDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.refSerie" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.documentoNombre" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.idCuenta" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.dReferencia" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.rReferenciaId" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.rIdDocumentoOrigen" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.fECae" | translate }}
          </th>
          <th scope="col" class="px-8 py-3">
            {{ "fields.FENumeroDocumento" | translate }}
          </th>
          <th scope="col" class="px-8 py-3"></th>
        </tr>
      </thead>
      <tbody class="text-xs">
        <ng-container *ngFor="let model of docs">
          <tr
            class="transition-transform transform hover:translate-x-2 bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"
          >
            <td class="w-4 p-4">
              <div class="flex items-center">
                <label
                  class="relative flex cursor-pointer items-center rounded-full p-3"
                  for="checkbox-table-search"
                  data-ripple-dark="true"
                >
                  <input
                    id="checkbox-table-search-{{ model.Consecutivo_Interno }}"
                    type="checkbox"
                    class="before:content[''] peer relative h-5 w-5 cursor-pointer appearance-none rounded-md border border-gray-500 transition-all before:absolute before:top-2/4 before:left-2/4 before:block before:h-12 before:w-12 before:-translate-y-2/4 before:-translate-x-2/4 before:rounded-full before:bg-blue-gray-500 before:opacity-0 before:transition-opacity checked:border-teal-500 checked:bg-teal-500 checked:before:bg-teal-500 hover:before:opacity-20 dark:border-gray-400 dark:checked:border-teal-500 dark:checked:bg-teal-500 dark:before:bg-teal-500 dark:hover:before:opacity-25"
                    (change)="
                      estadoCheckbox(model.Consecutivo_Interno, $event);
                      actualizarMontosAplicados()
                    "
                  />
                  <div
                    class="pointer-events-none absolute top-2/4 left-2/4 -translate-y-2/4 -translate-x-2/4 text-white opacity-0 transition-opacity peer-checked:opacity-100"
                  >
                    <i class="fa-solid fa-check"></i>
                  </div>
                </label>
                <label
                  for="checkbox-table-search-{{ model.Consecutivo_Interno }}"
                  class="sr-only"
                  >checkbox</label
                >
              </div>
            </td>
            <td class="px-8 py-2 text-gray-900 dark:text-gray-200">
              {{ model.Monto }}
            </td>
            <td class="px-1 py-2 font-medium text-center whitespace-nowrap">
              <input
                type="number"
                [value]="model.Saldo"
                [max]="model.Saldo"
                [step]="0.01"
                class="w-full px-2 py-1 border border-gray-300 rounded"
                placeholder="{{ 'labels.ingresarMonto' | translate }}"
                [id]="'monto-input-' + model.Consecutivo_Interno"
                [disabled]="
                  !checkboxesSeleccionados.includes(
                    model.Consecutivo_Interno
                  ) || model.aplicar === 0
                "
                [(ngModel)]="model.aplicar"
                (ngModelChange)="actualizarMontosAplicados()"
                (keydown)="onKeyDown($event)"
                data-input-type="number"
                *ngIf="
                  checkboxesSeleccionados.includes(model.Consecutivo_Interno)
                "
                [ngStyle]="{
                  color: model.aplicar > model.Saldo ? 'red' : 'black'
                }"
              />
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Saldo }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Valor_Aplicado }}
            </td>
            <th
              scope="row"
              class="px-6 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap dark:text-blue"
            >
              {{ model.Consecutivo_Interno }}
            </th>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.R_UserName }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Tipo_Cambio }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Moneda }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Monto_Moneda }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Valor_Aplicado_Moneda }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Fecha_Vencimiento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.UserName }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Estado_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Corriente }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cobrar_Pagar }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Empresa }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Localizacion }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Estacion_Trabajo }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Reg }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Estado }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Hora }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.M_Fecha_Hora }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.M_UserName }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Correntista }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Cta }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Corriente_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cobrar_Pagar_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Empresa_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Localizacion_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Estacion_Trabajo_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Reg_Padre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Cuenta }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Inicial }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Final }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Generar_Cheque }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Proceso }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Bancaria }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Id_Documento_Referencia }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Cuenta_Correntista_Ref }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Id_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Fecha_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Serie_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Nom_Moneda }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Moneda }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Simbolo }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Factura_Nombre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Cuenta_Cta }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Tipo_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.fDocumento_Relacion }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Des_Cuenta_Corriente }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Tipo_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Serie_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Empresa }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Localizacion }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Estacion_Trabajo }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Fecha_Reg }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Referencia }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Ref_Id_Documento }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Ref_Serie }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Documento_Nombre }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.Id_Cuenta }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.D_Referencia }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.R_Referencia_Id }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.R_Id_Documento_Origen }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.FE_Cae }}
            </td>
            <td class="px-8 py-1 text-gray-900 dark:text-gray-200">
              {{ model.FE_NumeroDocumento }}
            </td>
            <td class="flex items-center px-6 py-4">
              <a
                class="font-medium text-blue-600 dark:text-blue-500 hover:underline cursor-pointer"
                (click)="mostrarDetalles(model)"
                >{{
                  documentoSeleccionado === model.Consecutivo_Interno
                    ? ("fields.ocultarDetalles" | translate)
                    : ("fields.mostrarDetalles" | translate)
                }}</a
              >
            </td>
          </tr>
          <tr
            *ngIf="documentoSeleccionado === model.Consecutivo_Interno"
            class="details-row bg-white border-b dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"
          >
            <td
              class="px-8 py-8 text-gray-900 dark:text-gray-200 text-right"
              colspan="70"
            >
              | {{ ("fields.saldo" | translate) + ":" }} Q.{{
                obtenerDetallesSaldo(model.Saldo)
              }}
              | {{ ("fields.saldoMoneda" | translate) + ":" }} $.{{
                obtenerDetallesSaldoMoneda(model.Saldo_Moneda)
              }}
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>

  <div
    *ngIf="docs.length > 0"
    class="text-right mt-4 flex flex-wrap justify-center gap-4 p-4"
  >
    <div
      class="bg-white rounded-lg text-left overflow-hidden shadow transform transition-all w-full sm:w-80 sm:max-w-xs border-l-4 border-amber-500 dark:bg-gray-800 dark:border-l-4 mb-4 sm:mb-0"
    >
      <div class="bg-white p-3 dark:bg-gray-800">
        <div class="flex items-start">
          <div class="text-center sm:text-left">
            <h3
              class="text-xs sm:text-sm leading-4 font-medium text-gray-400 dark:text-gray-300"
            >
              {{ "labels.totalAplicando" | translate }}
            </h3>
            <p
              class="text-sm font-semibold text-gray-900 dark:text-white"
              style="white-space: nowrap"
            >
              {{ docs[0].Simbolo }}{{ sumaAplicada | number }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="bg-white rounded-lg text-left overflow-hidden shadow transform transition-all w-full sm:w-80 sm:max-w-xs border-l-4 border-amber-500 dark:bg-gray-800 dark:border-l-4 mb-4 sm:mb-0"
    >
      <div class="bg-white p-3 dark:bg-gray-800">
        <div class="flex items-start">
          <div class="text-center sm:text-left">
            <h3
              class="text-xs sm:text-sm leading-4 font-medium text-gray-400 dark:text-gray-300"
            >
              {{ "labels.totalMontos" | translate }}
            </h3>
            <p
              class="text-sm font-semibold text-gray-900 dark:text-white"
              style="white-space: nowrap; text-overflow: ellipsis"
            >
              {{ docs[0].Simbolo }}{{ sumaMontos | number }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="bg-white rounded-lg text-left overflow-hidden shadow transform transition-all w-full sm:w-80 sm:max-w-xs border-l-4 border-amber-500 dark:bg-gray-800 dark:border-l-4 mb-4 sm:mb-0"
    >
      <div class="bg-white p-3 dark:bg-gray-800">
        <div class="flex items-start">
          <div class="text-center sm:text-left">
            <h3
              class="text-xs sm:text-sm leading-4 font-medium text-gray-400 dark:text-gray-300"
            >
              {{ "labels.totalSaldos" | translate }}
            </h3>
            <p
              class="text-sm font-semibold text-gray-900 dark:text-white"
              style="white-space: nowrap"
            >
              {{ docs[0].Simbolo }}{{ sumaSaldos | number }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="bg-white rounded-lg text-left overflow-hidden shadow transform transition-all w-full sm:w-80 sm:max-w-xs border-l-4 border-amber-500 dark:bg-gray-800 dark:border-l-4 mb-4 sm:mb-0"
    >
      <div class="bg-white p-3 dark:bg-gray-800">
        <div class="flex items-start">
          <div class="text-center sm:text-left">
            <h3
              class="text-xs sm:text-sm leading-4 font-medium text-amber-500 dark:text-amber-400"
            >
              {{ "labels.diferencia" | translate }}
            </h3>
            <p
              class="text-sm font-semibold text-gray-900 dark:text-white"
              style="white-space: nowrap"
            >
              {{ docs[0].Simbolo }}{{ diferenciaSaldos | number }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  *ngIf="mostrarCreacionRecibo && docs.length > 0"
  class="mt-0 absolute text-left left-0 right-0"
>
  <app-creacion-recibo *ngIf="mostrarCreacionRecibo"></app-creacion-recibo>
</div>
